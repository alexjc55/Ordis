# üóÑÔ∏è eDAHouse - –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –ë–î –≤ –∫–∞–∂–¥–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π | –°–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î | –î–µ–π—Å—Ç–≤–∏—è | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
|----------|--------------|----------|--------------|
| üÜï **–ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** | –ü—É—Å—Ç–∞—è/–Ω–µ—Ç –ë–î | –°–æ–∑–¥–∞–Ω–∏–µ + –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ | ‚úÖ –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ | –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã (`npm run db:push`) | ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è |
| üîÄ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** | –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ | –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã | ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è |

---

## üÜï –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (`install-on-vps.sh`)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ë–î:**
```bash
# 1. –°–æ–∑–¥–∞–µ—Ç—Å—è .env —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º DATABASE_URL
DATABASE_URL=postgresql://edahouse_ord:33V0R1N5qi81paiA@localhost:5432/edahouse_ord

# 2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã (—á–µ—Ä–µ–∑ Drizzle –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–∏)
#    - –ó–∞–ø–æ–ª–Ω—è–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (seed –¥–∞–Ω–Ω—ã–µ)
npm run build && node server/index.js
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è –Ω–æ–≤–∞—è –ë–î —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã).

---

## üîÑ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (`update-project.sh`)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ë–î:**
```bash
# 1. –î–ê–ù–ù–´–ï –ù–ï –¢–†–û–ì–ê–Æ–¢–°–Ø! –°–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ø—Ä–æ–µ–∫—Ç–∞
cp -r . ../backup_$(date +%Y%m%d_%H%M%S)

# 2. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –°–•–ï–ú–ê –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run db:push  # –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã/–ø–æ–ª—è, –ù–ï —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
curl -f http://localhost:3000/api/health
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –≤–∞—à–∏ –ø—Ä–æ–¥—É–∫—Ç—ã, –∑–∞–∫–∞–∑—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è. –î–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –ø–æ–ª—è/—Ç–∞–±–ª–∏—Ü—ã.

---

## üîÄ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (`sync-from-replit.sh`)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ë–î:**
```bash
# 1. –†–ï–ó–ï–†–í–ù–ê–Ø –ö–û–ü–ò–Ø –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–≤–∫–ª—é—á–∞—è .env —Å –ø–∞—Ä–æ–ª–µ–º –ë–î)
BACKUP_DIR="/var/backups/edahouse/sync_backup_$(date +%Y%m%d_%H%M%S)"
cp .env "$BACKUP_DIR/"

# 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –ë–ï–ó –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î
cp "$BACKUP_DIR/.env" ./

# 4. –¢–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã
npm run db:push

# 5. –ë–î –æ—Å—Ç–∞–µ—Ç—Å—è —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, —Å—Ö–µ–º–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –î–ê–ù–ù–´–ï –°–û–•–†–ê–ù–Ø–Æ–¢–°–Ø.

---

## üõ°Ô∏è –ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### 1. **Drizzle ORM –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
```bash
npm run db:push  # –ë–ï–ó–û–ü–ê–°–ù–û
```
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è 
- ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç —Ç–∏–ø—ã –ø–æ–ª–µ–π (–∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ)
- ‚ùå –ù–ï —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚ùå –ù–ï —É–¥–∞–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
- ‚ùå –ù–ï —É–¥–∞–ª—è–µ—Ç –ø–æ–ª—è

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**
```bash
# –ö–∞–∂–¥—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ü–ï–†–ï–î –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
/var/backups/edahouse/
‚îú‚îÄ‚îÄ update_backup_20250704_215530/    # –û–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ sync_backup_20250704_220145/      # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ install_backup_20250704_194820/   # –£—Å—Ç–∞–Ω–æ–≤–∫–∏
```

### 3. **–û—Ç–∫–∞—Ç –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º**
```bash
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:
cd www/edahouse.ordis.co.il
cp -r /var/backups/edahouse/latest_backup/* ./
pm2 restart edahouse
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
psql -U ordis_co_il_usr -d edahouse_ord

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
SELECT COUNT(*) FROM products;

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∫–∞–∑—ã
SELECT COUNT(*) FROM orders;

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
SELECT COUNT(*) FROM users;
```

---

## üö® –í–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### ‚úÖ **–ß–¢–û –ë–ï–ó–û–ü–ê–°–ù–û:**
- `npm run db:push` - —Ç–æ–ª—å–∫–æ —Å—Ö–µ–º–∞
- `git pull` - —Ç–æ–ª—å–∫–æ –∫–æ–¥
- `npm install` - —Ç–æ–ª—å–∫–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ server/, client/, shared/ –ø–∞–ø–æ–∫

### ‚ùå **–ß–¢–û –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ï–ú:**
- `DROP TABLE` –∫–æ–º–∞–Ω–¥—ã
- `DELETE FROM` –±–µ–∑ WHERE
- –£–¥–∞–ª–µ–Ω–∏–µ –ë–î —Ü–µ–ª–∏–∫–æ–º
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ DATABASE_URL –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ

---

## üìã –ö—Ä–∞—Ç–∫–∏–π –∏—Ç–æ–≥

**–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:** –ë–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –Ω—É–ª—è + –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ  
**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç:** –ë–∞–∑–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ë–ï–ó –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö  
**–í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞

**–í–∞—à–∏ –ø—Ä–æ–¥—É–∫—Ç—ã, –∑–∞–∫–∞–∑—ã, –∫–ª–∏–µ–Ω—Ç—ã –í–°–ï–ì–î–ê —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è!** üõ°Ô∏è